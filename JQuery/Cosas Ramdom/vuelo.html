<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Reserva de Vuelo</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="background-image">
    <div class="container">
        <h1>Â¡Viaja con ASIR!</h1>
        <form id="reservation-form">
            <div class="form-group">
                <label for="name">Nombre</label>
                <input type="text" class="form-control" id="name" required>
            </div>
            <div class="form-group">
                <label for="surname">Apellidos</label>
                <input type="text" class="form-control" id="surname" required>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" class="form-control" id="email" required>
            </div>
            <div class="form-group">
                <label for="dni">DNI</label>
                <input type="text" class="form-control" id="dni" required>
            </div>
            <div class="form-group">
                <label for="ida">Fecha de Ida</label>
                <input type="text" class="form-control" id="ida" required>
            </div>
            <div class="form-group">
                <label for="vuelta">Fecha de Vuelta</label>
                <input type="text" class="form-control" id="vuelta">
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="idayvuelta">
                <label class="form-check-label" for="idayvuelta">Ida y vuelta</label>
            </div>
            <button type="submit" class="btn btn-primary">Reservar</button>
        </form>
        <div id="resumen"></div>
        <div id="qrcode"></div>
    </div>
</div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
    <script src="app.js"></script>
    <script>
        $(document).ready(function () {
            $("button").click(function(){
                let correo = $("#email").val()
                let patronCorreo = /^\w+([.-_+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/
                if (correo == ""){
                    alert("Rellena el campo correo")
                }
                else{
                    if (!patronCorreo.test(correo)){ 
                        alert("El correo no parece verdadero")
                    }
                }

                let dni = $("#dni").val()
                let letraDNI = dni.substring(8, 9);
                let numDNI = parseInt(dni.substring(0, 8));
                let letras = ['T', 'R', 'W', 'A', 'G', 'M', 'Y', 'F', 'P', 'D', 'X', 'B', 'N', 'J', 'Z', 'S', 'Q', 'V', 'H', 'L', 'C', 'K', 'E', 'T']
                let letraCorrecta = letras[numDNI % 23];
                let patronDni = /\d{8}[a-z A-Z]/
                if (!patronDni.test(dni)){
                    alert("El patron no es correcto")
                }
                else{
                    if (letraDNI != letraCorrecta){
                        alert("La letra o numero del DNI es incorrecto/a")
                    }
                }
            })
        });
    </script>
</body>
</html>
